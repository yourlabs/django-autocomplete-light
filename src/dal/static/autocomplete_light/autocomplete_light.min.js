var yl=yl||{};yl.functions={},yl.registerFunction=function(e,t){if(this.functions.hasOwnProperty(e))console.error('The DAL function "'+e+'" has already been registered.');else{if("function"!=typeof t)throw new Error("The custom DAL function must be a function.");this.functions[e]=t;var n=new CustomEvent("dal-function-registered."+e,{detail:{name:e,func:t}});window.dispatchEvent(n)}},window.addEventListener("load",function(){window.django=window.django||{},django.hasOwnProperty("jQuery")||"undefined"===jQuery||(django.jQuery=jQuery),function(e){e.fn.getFormPrefix=function(){var t=e(this).attr("name").split("-");for(var n in t){var r=t.slice(0,-n).join("-");if(r.length)if(e(":input[name^="+(r+="-")+"]").length)return r}return""},e.fn.getFormPrefixes=function(){var t=e(this).attr("name").split("-").slice(0,-1),n=[];for(i=0;i<t.length;i+=2){var r=t.slice(0,-i||t.length).join("-");if(r.length)e(":input[name^="+(r+="-")+"]").length&&n.push(r)}return n.push(""),n},"undefined"!=typeof dalLoadLanguage?dalLoadLanguage(e):document.addEventListener("dal-language-loaded",function(t){dalLoadLanguage(e)});var t=new CustomEvent("dal-init-function");document.dispatchEvent(t);var n=[];function r(t){if(void 0!==t&&"number"!=typeof t||(t=this),!(n.indexOf(t)>=0)){var r=e(t).attr("data-autocomplete-light-function");yl.functions.hasOwnProperty(r)&&"function"==typeof yl.functions[r]?yl.functions[r](e,t):yl.functions.hasOwnProperty(r)?window.addEventListener("dal-function-registered."+r,function(n){yl.functions[r](e,t)}):console.warn('Your custom DAL function "'+r+'" uses a deprecated event listener that will be removed in future versions. https://django-autocomplete-light.readthedocs.io/en/master/tutorial.html#overriding-javascript-code'),e(t).trigger("autocompleteLightInitialize"),n.push(t)}}if(window.__dal__initialize||(window.__dal__initialize=r,e(document).ready(function(){e('[data-autocomplete-light-function]:not([id*="__prefix__"])').each(r)}),"MutationObserver"in window?new MutationObserver(function(t){for(var n,i,o=0;o<t.length;o++)if((n=t[o]).addedNodes.length>0)for(var a=0;a<n.addedNodes.length;a++)i=n.addedNodes[a],e(i).find("[data-autocomplete-light-function]").each(r)}).observe(document.documentElement,{childList:!0,subtree:!0}):e(document).on("DOMNodeInserted",function(t){e(t.target).find("[data-autocomplete-light-function]").each(r)})),document.csrftoken=function(t){var n=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),i=0;i<r.length;i++){var o=e.trim(r[i]);if(o.substring(0,t.length+1)==t+"="){n=decodeURIComponent(o.substring(t.length+1));break}}return n}("csrftoken"),null===document.csrftoken){var o=e('form :input[name="csrfmiddlewaretoken"]');o.length>0&&(document.csrftoken=o[0].value)}}(django.jQuery),function(e){"use strict";e.fn.djangoAdminSelect2=function(t){var n=e.extend({},t);return e.each(this,function(t,r){!function(t,n){var r=e.extend({ajax:{data:function(e){return{term:e.term,page:e.page}}}},n);t.select2(r)}(e(r),n)}),this},e(function(){e(".admin-autocomplete").not("[name*=__prefix__]").djangoAdminSelect2()}),e(document).on("formset:added",function(e,t){return t.find(".admin-autocomplete").djangoAdminSelect2()})}(django.jQuery),function(e,t){t.forwardHandlerRegistry=t.forwardHandlerRegistry||{},t.registerForwardHandler=function(e,n){t.forwardHandlerRegistry[e]=n},t.getForwardHandler=function(e){return t.forwardHandlerRegistry[e]},t.getFieldRelativeTo=function(t,n){for(var r=e(t).getFormPrefixes(),i=0;i<r.length;i++){var o="[name="+r[i]+n+"]",a=e(o);if(a.length)return a}return e()},t.getValueFromField=function(t){var n,r,i=1===(n=t).length&&"checkbox"===n.attr("type")&&void 0===n.attr("value")?"exists":1===n.length&&void 0!==n.attr("multiple")?"multiple":(r=!0,e.each(n,function(t,n){"checkbox"!==e(n).attr("type")&&(r=!1)}),r?"multiple":"single"),o=e(t).serializeArray();0==o&&e(t).prop("disabled")&&(e(t).prop("disabled",!1),o=e(t).serializeArray(),e(t).prop("disabled",!0));var a,d=function(e){return e.hasOwnProperty("value")&&void 0!==e.value?e.value:null};return"multiple"===i?o.map(function(e){return d(e)}):"exists"===i?o.length>0:null!==(a=function(e){return o.length>e?o[e]:null}(0))?d(a):null},t.getForwards=function(n){var r,i,o,a;if(a="div.dal-forward-conf#dal-forward-conf-for-"+n.attr("id")+", div.dal-forward-conf#dal-forward-conf-for_"+n.attr("id"),0!==(r=(n.length>0?e(n[0].form):e()).find(a).find("script")).length){try{i=JSON.parse(r.text())}catch(e){return}if(Array.isArray(i))return o={},e.each(i,function(e,r){var i,a;if("const"===r.type)o[r.dst]=r.val;else if("self"===r.type)a=r.hasOwnProperty("dst")?r.dst:"self",o[a]=t.getValueFromField(n);else if("field"===r.type){i=r.src,a=r.hasOwnProperty("dst")?r.dst:i;var d=t.getFieldRelativeTo(n,i);if(!d.length)return;o[a]=t.getValueFromField(d)}else if("javascript"===r.type){var u=t.getForwardHandler(r.handler);o[r.dst||r.handler]=u(n)}}),JSON.stringify(o)}}}(django.jQuery,yl)});
