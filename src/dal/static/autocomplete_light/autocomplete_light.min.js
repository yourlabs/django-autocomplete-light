window.addEventListener("load",function(){var $,yl=yl||{};!function($){$.fn.getFormPrefix=function(){var t=$(this).attr("name").split("-");for(var e in t){var a=t.slice(0,-e).join("-");if(a.length)if($(":input[name^="+(a+="-")+"]").length)return a}return""},$.fn.getFormPrefixes=function(){var t=$(this).attr("name").split("-").slice(0,-1),e=[];for(i=0;i<t.length;i+=2){var a=t.slice(0,-i||t.length).join("-");a.length&&$(":input[name^="+(a+="-")+"]").length&&e.push(a)}return e.push(""),e},"undefined"!=typeof dalLoadLanguage?dalLoadLanguage($):document.addEventListener("dal-language-loaded",function(t){dalLoadLanguage($)});var t,e=[];function o(t){void 0!==t&&"number"!=typeof t||(t=this),!0!==window.__dal__initListenerIsSet||0<=e.indexOf(t)||($(t).trigger("autocompleteLightInitialize"),e.push(t))}window.__dal__initialize||(window.__dal__initialize=o,$(document).ready(function(){$('[data-autocomplete-light-function=select2]:not([id*="__prefix__"])').each(o)}),"MutationObserver"in window?new MutationObserver(function(t){for(var e,a,n=0;n<t.length;n++)if(0<(e=t[n]).addedNodes.length)for(var r=0;r<e.addedNodes.length;r++)a=e.addedNodes[r],$(a).find("[data-autocomplete-light-function=select2]").each(o)}).observe(document.documentElement,{childList:!0,subtree:!0}):$(document).on("DOMNodeInserted",function(t){$(t.target).find("[data-autocomplete-light-function=select2]").each(o)})),document.csrftoken=function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=$.trim(a[n]);if(r.substring(0,t.length+1)==t+"="){e=decodeURIComponent(r.substring(t.length+1));break}}return e}("csrftoken"),null!==document.csrftoken||0<(t=$('form :input[name="csrfmiddlewaretoken"]')).length&&(document.csrftoken=t[0].value)}(django.jQuery),function($){"use strict";$.fn.djangoAdminSelect2=function(t){var o=$.extend({},t);return $.each(this,function(t,e){var a,n,r,i=$(e);a=i,n=o,r=$.extend({ajax:{data:function(t){return{term:t.term,page:t.page}}}},n),a.select2(r)}),this},$(function(){$(".admin-autocomplete").not("[name*=__prefix__]").djangoAdminSelect2()}),$(document).on("formset:added",function(t,e){return e.find(".admin-autocomplete").djangoAdminSelect2()})}(django.jQuery),function($,yl){function o(t){var a;return 1===t.length&&"checkbox"===t.attr("type")&&void 0===t.attr("value")?"exists":1===t.length&&void 0!==t.attr("multiple")?"multiple":(a=!0,$.each(t,function(t,e){"checkbox"!==$(e).attr("type")&&(a=!1)}),a?"multiple":"single")}yl.forwardHandlerRegistry=yl.forwardHandlerRegistry||{},yl.registerForwardHandler=function(t,e){yl.forwardHandlerRegistry[t]=e},yl.getForwardHandler=function(t){return yl.forwardHandlerRegistry[t]},yl.getFieldRelativeTo=function(t,e){for(var a=$(t).getFormPrefixes(),n=0;n<a.length;n++){var r="[name="+a[n]+e+"]",i=$(r);if(i.length)return i}return $()},yl.getValueFromField=function(t){var e=o(t),a=$(t).serializeArray();0==a&&$(t).prop("disabled")&&($(t).prop("disabled",!1),a=$(t).serializeArray(),$(t).prop("disabled",!0));function n(t){return t.hasOwnProperty("value")&&void 0!==t.value?t.value:null}var r,i;return"multiple"===e?a.map(n):"exists"===e?0<a.length:(r=0,null!==(i=a.length>r?a[r]:null)?n(i):null)},yl.getForwards=function(o){var t,d,e="div.dal-forward-conf#dal-forward-conf-for-"+o.attr("id")+", div.dal-forward-conf#dal-forward-conf-for_"+o.attr("id"),a=(0<o.length?$(o[0].form):$()).find(e).find("script");if(0!==a.length){try{t=JSON.parse(a.text())}catch(t){return}if(Array.isArray(t))return d={},$.each(t,function(t,e){var a,n,r;if("const"===e.type)d[e.dst]=e.val;else if("self"===e.type)n=e.hasOwnProperty("dst")?e.dst:"self",d[n]=yl.getValueFromField(o);else if("field"===e.type){a=e.src,n=e.hasOwnProperty("dst")?e.dst:a;var i=yl.getFieldRelativeTo(o,a);if(!i.length)return;d[n]=yl.getValueFromField(i)}else{"javascript"===e.type&&(r=yl.getForwardHandler(e.handler),d[e.dst||e.handler]=r(o))}}),JSON.stringify(d)}}}(django.jQuery,yl),$=django.jQuery,window.__dal__initListenerIsSet||($(document).on("autocompleteLightInitialize","[data-autocomplete-light-function=select2]",function(){var a=$(this);function n(t,e){if(e){var a=$("<span>");return a.html(t),a}return t}function e(t){var e=n(t.text,void 0!==a.attr("data-html")||void 0!==a.attr("data-result-html"));return t.create_id?$("<span></span>").text(e).addClass("dal-create"):e}var t=null;$(this).attr("data-autocomplete-light-url")&&(t={url:$(this).attr("data-autocomplete-light-url"),dataType:"json",delay:250,data:function(t){return{q:t.term,page:t.page,create:a.attr("data-autocomplete-light-create")&&!a.attr("data-tags"),forward:yl.getForwards(a)}},processResults:function(t,e){return a.attr("data-tags")&&$.each(t.results,function(t,e){e.id=e.text}),t},cache:!0}),$(this).select2({tokenSeparators:a.attr("data-tags")?[","]:null,debug:!0,containerCssClass:":all:",placeholder:a.attr("data-placeholder")||"",language:a.attr("data-autocomplete-light-language"),minimumInputLength:a.attr("data-minimum-input-length")||0,allowClear:!$(this).is("[required]"),templateResult:e,templateSelection:function(t){return void 0!==t.selected_text?n(t.selected_text,void 0!==a.attr("data-html")||void 0!==a.attr("data-selected-html")):e(t)},ajax:t,with:null,tags:Boolean(a.attr("data-tags"))}),$(this).on("select2:selecting",function(t){var n,e=t.params.args.data;!0===e.create_id&&(t.preventDefault(),n=$(this),$.ajax({url:$(this).attr("data-autocomplete-light-url"),type:"POST",dataType:"json",data:{text:e.id,forward:yl.getForwards($(this))},beforeSend:function(t,e){t.setRequestHeader("X-CSRFToken",document.csrftoken)},success:function(t,e,a){n.append($("<option>",{value:t.id,text:t.text,selected:!0})),n.trigger("change"),n.select2("close")}}))})}),window.__dal__initListenerIsSet=!0,$('[data-autocomplete-light-function=select2]:not([id*="__prefix__"])').each(function(){window.__dal__initialize(this)}))});